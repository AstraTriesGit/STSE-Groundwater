---
title: "Comparison Between Spatial and Spatio-temporal Residual Kriging on GWL Dataset"
output: pdf_document
---

The following happens post the events of `eda/combined_moving_further.rmd`. The data engineering step is over,
and now analysis will follow.
```{r}
library(feather)

gwl <- read_feather("data/combined/sep_panel.feather")
```

## Trend Model
For now, we do the most braindead simple regression ever.
```{r}
gwl <- gwl %>%
  rename(x = longitude, y = latitude, time = data_time) %>%
  mutate(time = as.numeric(time),
         long_time = x * time,
         lat_time = y * time,
         lat_long = x * y)

# replace trend model with something smarter later PLEASE
trend_model <- lm(avg_gwl ~ y + x + time + lat_time + long_time + lat_long,
                  data = gwl)
summary(trend_model)
```

## Residuals and Variograms
And to do something smart with them.
```{r}
library(gstat)
library(spacetime)



st_vgm <- variogramST(residuals ~ 1,
                      data = gwl_stdata,
                      tlags = 0:11,
                      cutoff = 1000,
                      tunit = "months"
)

```
